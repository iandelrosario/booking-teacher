$(".contentEditable").on("paste",function(e){e.preventDefault();var t=(e.originalEvent||e).clipboardData.getData("text/html"),n=$("<div></div>").append($(t));n.children("style").remove(),n.children("meta").remove(),n.children("link").remove();var a=n.html().replace(/<\/?[^`]+?\/?>/gim,"\n").replace(/\n[\s]*\n/gim,"\n"),c=(a=$.trim(a)).split("\n");for(var o in c)c[o]="<div>"+$.trim(c[o])+"</div>";a=c.join("\n"),$(this).html(a),$("#contentEditable").val($(this).html())}),$(document).on("click",".comment-cancel",function(e){var t=$(this).attr("data-id");$(this).html("Delete"),$(this).removeClass("comment-cancel"),$(this).addClass("comment-delete"),$("#comment-edit-"+t).html("Edit"),$("#comment-edit-"+t).removeClass("comment-edit-submit"),$("#comment-edit-"+t).addClass("comment-edit");var n=$("#comment-content-"+t);n.removeClass("border"),n.removeClass("border-secondary"),n.removeClass("hartpiece-rounded-corner"),n.removeClass("form-group"),n.removeAttr("style"),e.preventDefault()}),$(document).on("click",".comment-edit-submit",function(e){var t=$(this).attr("data-id"),n=$("#comment-content-"+t).html(),a=$(".contentEditable").attr("data-slug");$.ajax({url:"/comment/edit",type:"POST",data:{id:t,comment:n,key:a},success:function(e){$("#comment-delete-"+t).click()}}),e.preventDefault()}),$(document).on("click",".comment-edit",function(e){var t=$(this).attr("data-id"),n=($(".contentEditable").attr("data-slug"),$("#comment-content-"+t));n.attr("contenteditable",!0),n.addClass("border"),n.addClass("border-secondary"),n.addClass("hartpiece-rounded-corner"),n.addClass("form-group"),n.css("outline","none"),n.css("padding","10px 15px"),$(this).removeClass("comment-edit"),$(this).addClass("comment-edit-submit"),$(this).html("Save"),$("#comment-delete-"+t).html("Cancel"),$("#comment-delete-"+t).removeClass("comment-delete"),$("#comment-delete-"+t).addClass("comment-cancel"),e.preventDefault()}),$(document).on("click",".comment-delete",function(e){var t=$(this).attr("data-id"),n=$(".contentEditable").attr("data-slug");$.ajax({url:"/comment/delete",type:"POST",data:{id:t,key:n},success:function(e){$("."+n+"-comment").html(e),$("#comment-"+t).remove()}}),e.preventDefault()}),$(document).on("keypress",".contentEditable",function(e){if(13==e.keyCode&&!e.shiftKey){var t=$(this).html();$("#hartpiece-profile-image").attr("src"),$("#fullname").html();if(""===t)return!1;var n=$(this).attr("data-slug");$.ajax({url:"/comment/add",type:"POST",data:{id:n,comment:t},success:function(e){$(".contentEditable").empty(),$("#comment-section").prepend(e)}})}});var limit=parseInt($("#limit").val()),sl=$(".contentEditable").attr("data-slug");$(window).scroll(function(){window.innerHeight+window.pageYOffset>=document.body.offsetHeight&&($.ajax({url:"/paginate/comment",type:"POST",data:{l:limit,s:sl},success:function(e){$("#comment-section").append(e)}}),limit+=limit)}),$(document).ready(function(){$(".contentEditable").keydown(function(e){if(e.ctrlKey||e.metaKey){switch(e.keyCode){case 66:case 98:ret=!1;break;case 73:case 105:ret=!1;break;case 85:case 117:ret=!1;break;default:ret=!0}return ret}})});
